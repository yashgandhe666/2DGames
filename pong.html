<html>
<canvas id= "gameCanvas" width = "800" height ="600"> </canvas>

<script>
	var canvas;
	var context;
	var ballX = 100;
	var ballSpeedX = 10;
	var ballY = 100;
	var ballSpeedY = 4;
	var ballRad = 10;
	var paddle1Y = 250;
	const PADDLE_HEIGHT = 100;

	function calculateMousePos(evt) {
		var rect = canvas.getBoundingClientRect();
		var root = document.documentElement;
		var mouseX = evt.clientX - rect.left - root.scrollLeft;
		var mouseY = evt.clientY - rect.top - root.scrollTop;
		return {
			x:mouseX,
			y:mouseY
		};
	}
	window.onload = function() {
		canvas = document.getElementById("gameCanvas");
		context = canvas.getContext("2d");
		
		var fps = 30
		setInterval(function() {
			moveAll();
			drawAll();
		}, 1000/fps);

		canvas.addEventListener('mousemove',
		function(evt) {
			var mousePos = calculateMousePos(evt);
			paddle1Y = mousePos.y - (PADDLE_HEIGHT/2);
		});	
	}

	function moveAll() {
		ballX += ballSpeedX;
		ballY += ballSpeedY;
		if(ballX > canvas.width ) {
			ballSpeedX = -ballSpeedX;
		}
		if(ballX < 0) {
			ballSpeedX = -ballSpeedX;
		}
		if(ballY < 0) {
			ballSpeedY = -ballSpeedY;
		}
		if(ballY > canvas.height) {
			ballSpeedY = -ballSpeedY;
		}
	}

	function drawAll() {
		// black background
		draw_rect(0, 0, canvas.width, canvas.height, "black");
		// left player paddle
		draw_rect(0, paddle1Y, 10, PADDLE_HEIGHT, "white");
		// the ball
		draw_circle(ballX, ballY ,ballRad, "white");
	}
	function draw_circle(centerX, centerY, radius, drawColor) {
		context.fillStyle = drawColor;
		context.beginPath();
		context.arc(centerX, centerY, radius, 0, 2*Math.PI, true);
		context.fill(); 
	}

	function draw_rect(leftX, topY, width, height, drawColor) {
		context.fillStyle = drawColor;
		context.fillRect(leftX, topY, width, height);
	}
</script>
</html>
